[gd_scene load_steps=27 format=3 uid="uid://ckd6lb1ga41sf"]

[ext_resource type="Script" uid="uid://0e7cubkvwvvf" path="res://scripts/dialog_system/PrettyTextBox.gd" id="1_fin6i"]
[ext_resource type="AudioStream" uid="uid://lyyv4d1y88ut" path="res://art/sounds/typing1.wav" id="2_4en75"]
[ext_resource type="Script" uid="uid://oftyspnf0fd3" path="res://scripts/dialog_system/DialogSystem.gd" id="2_42d8r"]
[ext_resource type="AudioStream" uid="uid://dvwvtqkhmkjja" path="res://art/sounds/typing2.wav" id="3_aq5dq"]
[ext_resource type="Script" uid="uid://drunnu1gxn230" path="res://scripts/dialog_system/DialogCoroutine.gd" id="3_gutn5"]
[ext_resource type="Script" uid="uid://ubonts5hn7fi" path="res://scripts/dialog_custom_actions/DialogAction_Fader.gd" id="4_1tgrv"]
[ext_resource type="AudioStream" uid="uid://bngdb6kvcpvgj" path="res://art/sounds/typing3.wav" id="4_5g2oq"]
[ext_resource type="AudioStream" uid="uid://b1oa0aixjoxwx" path="res://art/sounds/typing4.wav" id="5_kd8v4"]
[ext_resource type="AudioStream" uid="uid://ka8006boe45u" path="res://art/sounds/typing5.wav" id="6_kh5rm"]
[ext_resource type="FontFile" uid="uid://bkxx1ukjneiqi" path="res://art/fonts/veteran typewriter.ttf" id="7_4vcsn"]
[ext_resource type="Texture2D" uid="uid://3nt84bbdeiat" path="res://art/shop/text_bubble.png" id="8_mff2p"]
[ext_resource type="Script" uid="uid://dhr2kqkkrp5oi" path="res://scripts/dialog_system/misc/LabelVisualizeTextPiece.gd" id="9_kd8v4"]
[ext_resource type="Texture2D" uid="uid://bvg4onu7meubs" path="res://art/shop/text_bubble-dot.png" id="10_kh5rm"]
[ext_resource type="Script" uid="uid://cg1lxu8vcax2p" path="res://scripts/dialog_custom_actions/DialogNodePlayRecorder.gd" id="12_4vcsn"]
[ext_resource type="Script" uid="uid://b1igdcx7pq657" path="res://scripts/dialog_system/DialogCall.gd" id="13_4en75"]
[ext_resource type="Script" uid="uid://mpunko578tq3" path="res://scripts/dialog_custom_actions/DialogAction_PlaySoundtrack.gd" id="15_kh5rm"]
[ext_resource type="Script" uid="uid://24o8mm5k8wt3" path="res://scripts/dialog_system/DialogMessage.gd" id="16_5g2oq"]
[ext_resource type="Script" uid="uid://dfavgujxe6882" path="res://scripts/dialog_system/simple_actions/DialogActionTransitionScene.gd" id="16_kd8v4"]
[ext_resource type="PackedScene" uid="uid://dfb3nyvrfv6a7" path="res://scenes/MainScene.tscn" id="17_kh5rm"]

[sub_resource type="Gradient" id="Gradient_f0hic"]
offsets = PackedFloat32Array(0)
colors = PackedColorArray(0, 0, 0, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_lg00b"]
gradient = SubResource("Gradient_f0hic")

[sub_resource type="FontVariation" id="FontVariation_kd8v4"]
base_font = ExtResource("7_4vcsn")
spacing_bottom = 14

[sub_resource type="Theme" id="Theme_plw00"]
default_font = SubResource("FontVariation_kd8v4")
default_font_size = 24

[sub_resource type="Animation" id="Animation_5g2oq"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 1)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".:offset")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0, -21.678314)]
}

[sub_resource type="Animation" id="Animation_aq5dq"]
resource_name = "dot_jumping"
length = 2.0
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = false
tracks/0/path = NodePath(".:self_modulate")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(-0.033333335, 1.2),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 1), Color(1, 1, 1, 0.61960787)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".:offset")
tracks/1/interp = 2
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 1.2),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(0, 0), Vector2(0, -30)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_5g2oq"]
_data = {
&"RESET": SubResource("Animation_5g2oq"),
&"dot_jumping": SubResource("Animation_aq5dq")
}

[node name="IntroText" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Background" type="TextureRect" parent="."]
layout_mode = 1
anchors_preset = -1
anchor_right = 1.0090001
anchor_bottom = 1.0
offset_left = -47.0
offset_top = -44.0
offset_right = 26.719849
offset_bottom = 80.0
mouse_filter = 2
texture = SubResource("GradientTexture1D_lg00b")
expand_mode = 1

[node name="FancyFrame" type="Control" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Frame" type="NinePatchRect" parent="FancyFrame"]
layout_mode = 1
anchors_preset = -1
anchor_right = 1.667
anchor_bottom = 1.667
grow_horizontal = 2
grow_vertical = 2
scale = Vector2(0.6, 0.6)
texture = ExtResource("8_mff2p")
region_rect = Rect2(1540, 60, 761, 602)
patch_margin_left = 115
patch_margin_top = 112
patch_margin_right = 118
patch_margin_bottom = 110
axis_stretch_horizontal = 1
axis_stretch_vertical = 1

[node name="TextBubble" type="Control" parent="."]
z_index = 1
anchors_preset = 0
offset_top = -4.0
offset_right = 1938.0
offset_bottom = 1080.0
script = ExtResource("1_fin6i")
sounds_per_char = Array[AudioStream]([ExtResource("2_4en75"), ExtResource("3_aq5dq"), ExtResource("4_5g2oq"), ExtResource("5_kd8v4"), ExtResource("6_kh5rm")])
_dot_fade_duration = 0.5

[node name="Label" type="RichTextLabel" parent="TextBubble" node_paths=PackedStringArray("source")]
self_modulate = Color(0.75987595, 0.75987595, 0.75987595, 1)
z_index = 10
clip_contents = false
layout_mode = 1
anchors_preset = 10
anchor_right = 1.0
offset_left = 116.0
offset_top = 111.0
offset_right = -280.0
offset_bottom = 1050.0
grow_horizontal = 2
theme = SubResource("Theme_plw00")
bbcode_enabled = true
text = "Standing in front of the Tiberius hospital, make your way south, through the Sarnath boulevard.
When you see a shop with the sign \"Teddy Bears Extraordinaire\", delve into the shady passageway right behind it, then go left, right, left, left, forward, right, up the stairs, right, right, left, right, five more rights, and finally left.

That is how customers usually find your shop.
More than few unfortunate souls got their throat cut on the way.

For many, reward is well worth the risk.
Returning back a glimpse of long faded youth, erasing the consequences of folly, or even just unhealthy curiosity - all of these are good reasons to come to you, as far as you are concerned.

Nobody in their right mind would dare ask where your goods come from, however they don't seem to ever run out.
Your pride is in being able to find the one that is just right, for every single customer.
The price is whatever one can afford to give - you don't seek material wealth and live a very plain life without many expenses.


. . . You wake up in the morning after a good night's sleep.
There are already a few customers lined up in front of your shop.

It's time to go to work.
There are people in need of eyes, and you are the one to provide them."
fit_content = true
visible_characters_behavior = 3
script = ExtResource("9_kd8v4")
source = NodePath("../../DialogSystem_Intro/Fn_Text/Text")

[node name="AnimationPlayer" type="AnimationPlayer" parent="TextBubble"]
root_node = NodePath("../PrintFinishedMarker")
libraries = {
&"": SubResource("AnimationLibrary_5g2oq")
}
autoplay = "dot_jumping"

[node name="PrintFinishedMarker" type="Sprite2D" parent="TextBubble"]
position = Vector2(1781.9999, 992)
scale = Vector2(0.5497112, 0.5497113)
texture = ExtResource("10_kh5rm")
offset = Vector2(0, -21.678314)
region_enabled = true
region_rect = Rect2(1857.3008, 96.176636, 157.76428, 155.38937)

[node name="DialogSystem_Intro" type="Node" parent="." node_paths=PackedStringArray("default_text_box")]
script = ExtResource("2_42d8r")
run_on_start = true
default_text_box = NodePath("../TextBubble")

[node name="PlayRecorder" type="Node" parent="DialogSystem_Intro"]
script = ExtResource("12_4vcsn")

[node name="Fn_Main" type="Node" parent="DialogSystem_Intro"]
script = ExtResource("3_gutn5")

[node name="TextReset" type="Node" parent="DialogSystem_Intro/Fn_Main"]
script = ExtResource("16_5g2oq")
wait_for_user_input = false

[node name="FadeOut" type="Node" parent="DialogSystem_Intro/Fn_Main"]
script = ExtResource("4_1tgrv")
start_alpha = 1.0
duration_seconds = 2.0
ease = 1
transition = 4

[node name="StartMusic" type="Node" parent="DialogSystem_Intro/Fn_Main"]
script = ExtResource("15_kh5rm")

[node name="PrintText" type="Node" parent="DialogSystem_Intro/Fn_Main" node_paths=PackedStringArray("callee")]
script = ExtResource("13_4en75")
callee = NodePath("../../Fn_Text")

[node name="FadeIn" type="Node" parent="DialogSystem_Intro/Fn_Main"]
script = ExtResource("4_1tgrv")
end_alpha = 1.0
duration_seconds = 3.0
ease = 1
transition = 4

[node name="Transition" type="Node" parent="DialogSystem_Intro/Fn_Main"]
script = ExtResource("16_kd8v4")
destination = ExtResource("17_kh5rm")

[node name="Fn_Text" type="Node" parent="DialogSystem_Intro"]
script = ExtResource("3_gutn5")

[node name="Text" type="Node" parent="DialogSystem_Intro/Fn_Text"]
script = ExtResource("16_5g2oq")
text = "Standing in front of the Tiberius hospital, make your way south, through the Sarnath boulevard.
"
append = true

[node name="Text2" type="Node" parent="DialogSystem_Intro/Fn_Text"]
script = ExtResource("16_5g2oq")
text = "When you see a shop with the sign \"Teddy Bears Extraordinaire\", delve into the shady passageway right behind it, then go left, right, left, left, forward, right, up the stairs, right, right, left, right, five more rights, and finally left.

"
append = true

[node name="Text3" type="Node" parent="DialogSystem_Intro/Fn_Text"]
script = ExtResource("16_5g2oq")
text = "That is how customers usually find your shop.
"
append = true

[node name="Text4" type="Node" parent="DialogSystem_Intro/Fn_Text"]
script = ExtResource("16_5g2oq")
text = "More than few unfortunate souls got their throat cut on the way.

"
append = true

[node name="Text5" type="Node" parent="DialogSystem_Intro/Fn_Text"]
script = ExtResource("16_5g2oq")
text = "For many, reward is well worth the risk.
"
append = true

[node name="Text6" type="Node" parent="DialogSystem_Intro/Fn_Text"]
script = ExtResource("16_5g2oq")
text = "Returning back a glimpse of long faded youth, erasing the consequences of folly, or even just unhealthy curiosity - all of these are good reasons to come to you, as far as you are concerned.

"
append = true

[node name="Text7" type="Node" parent="DialogSystem_Intro/Fn_Text"]
script = ExtResource("16_5g2oq")
text = "Nobody in their right mind would dare ask where your goods come from, however they don't seem to ever run out.
"
append = true

[node name="Text8" type="Node" parent="DialogSystem_Intro/Fn_Text"]
script = ExtResource("16_5g2oq")
text = "Your pride is in being able to find the one that is just right, for every single customer.
"
append = true

[node name="Text9" type="Node" parent="DialogSystem_Intro/Fn_Text"]
script = ExtResource("16_5g2oq")
text = "The price is whatever one can afford to give - you don't seek material wealth and live a very plain life without many expenses.


"
append = true

[node name="Text10" type="Node" parent="DialogSystem_Intro/Fn_Text"]
script = ExtResource("16_5g2oq")
text = ". . . You wake up in the morning after a good night's sleep.
"
append = true

[node name="Text11" type="Node" parent="DialogSystem_Intro/Fn_Text"]
script = ExtResource("16_5g2oq")
text = "There are already a few customers lined up in front of your shop.

"
append = true

[node name="Text12" type="Node" parent="DialogSystem_Intro/Fn_Text"]
script = ExtResource("16_5g2oq")
text = "It's time to go to work.
"
append = true

[node name="Text13" type="Node" parent="DialogSystem_Intro/Fn_Text"]
script = ExtResource("16_5g2oq")
text = "There are people in need of eyes, and you are the one to provide them."
append = true

[node name="HideTheDot" type="Node" parent="DialogSystem_Intro/Fn_Text"]
script = ExtResource("16_5g2oq")
wait_for_user_input = false
append = true

[connection signal="before_node_is_performed" from="DialogSystem_Intro" to="DialogSystem_Intro/PlayRecorder" method="do_record"]
